# /test - 单元测试

## 描述

执行单元测试和集成测试，生成测试报告。

## 前置条件

- **代码已实现**：存在可运行的代码

## 参考学习

使用全局技能 `test-driven-development` 学习 TDD 最佳实践

## 工作流程

```
用户输入 /test
  ↓
检测项目测试框架
  ↓
执行测试命令
  ↓
解析测试结果
  ↓
生成测试报告
```

## 测试框架

| 语言/框架 | 测试框架 | 运行命令 |
|-----------|----------|----------|
| Node.js/Jest | Jest | `npm test` |
| Node.js/Vitest | Vitest | `npm test` |
| Python | pytest | `pytest` |
| Go | testing | `go test` |
| Java | JUnit | `mvn test` |

## 测试报告概览

```
┌────────────────────────────────────────────────────────────┐
│  测试报告                    执行时间：2024-01-15 14:30:00  │
├────────────────────────────────────────────────────────────┤
│  总测试数：150    通过：145    失败：3    跳过：2          │
│  通过率：96.7%    覆盖率：85.2%    耗时：45.2s            │
└────────────────────────────────────────────────────────────┘
```

## 测试优先级

| 优先级 | 测试类型 | 说明 |
|--------|----------|------|
| P0 | 核心功能测试 | 用户登录、核心业务逻辑 |
| P1 | 重要功能测试 | 主要业务流程、关键页面 |
| P2 | 一般功能测试 | 次要功能、边界情况 |
| P3 | 边缘测试 | 异常处理、错误恢复 |

**规则**：
- P0 测试必须全部通过
- P1 测试通过率需达到 95% 以上
- P2/P3 测试可适当放宽

## 相关指令

| 指令 | 描述 | 关系 |
|------|------|------|
| `/run` | 本地运行 | 前置步骤 |
| `/review` | 代码审查 | 下一步 |

## 后续操作

测试完成后：
1. **全部通过**：使用 `/review` 进行代码审查
2. **有失败**：修复问题后重新测试

## 示例

**用户**："执行测试"

**AI**：
```
检测测试框架：Jest
执行命令：npm test

测试执行中...
✓ 150 个测试已执行

┌────────────────────────────────────────────────────────────┐
│  测试报告                    执行时间：2024-01-15 14:30:00  │
├────────────────────────────────────────────────────────────┤
│  总测试数：150    通过：145    失败：3    跳过：2          │
│  通过率：96.7%    覆盖率：85.2%    耗时：45.2s            │
└────────────────────────────────────────────────────────────┘

❌ 失败测试：
1. 用户登录测试 - API 配置问题
2. 数据导出测试 - 超时问题
3. 权限验证测试 - 逻辑问题

建议：修复失败测试后重新执行 /test
```
